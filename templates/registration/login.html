{% extends 'core/base.html' %}

{% block title %} Login {% endblock title %}

{% block content %} 
  <div class="container mt-6 mb-auto">
    <section class="section">
      {% if next %}
        <article class="message is-warning mb-6">
          <p class="message-body">
            {% if form.errors %}
              Your username and password didn't match. Please try again.
            {% elif user.is_authenticated %}
              You are logged in but not allowed to go here.
            {% else %}
              You need to login first.
            {% endif %}
          </p>
        </article>
      {% endif %}

      <form action="{% url 'login' %}" method="POST">
        {% csrf_token %}
        {% for field in form %}
          <div class="field">
            <label class="label" for="{{ field.auto_id }}">{{ field.label }}</label>
            <div class="control">
              {{ field }}
            </div>
          </div>
        {% endfor %}
        <input class="button is-link" type="submit" value="Login">
        <input type="hidden" name="next" value="{{ next }}">
        <br />
        <small>
          <a href="">Forgot password?</a>
        </small>
      </form>
    </section>
  </div>
{% endblock content %}
